var info = {
    "message":"查询成功",
    "success":true,
    "data":[
        {
            "jobId":"37",
            "actionId":null,
            "startTime":"2018-11-22 03:32:33.0",
            "endTime":"2018-11-22 03:32:41.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"degree_flow",
            "times":1
        },
        {
            "jobId":"39",
            "actionId":null,
            "startTime":"2018-11-22 03:32:13.0",
            "endTime":"2018-11-22 03:32:18.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"money_flow",
            "times":1
        },
        {
            "jobId":"40",
            "actionId":null,
            "startTime":"2018-11-22 03:32:46.0",
            "endTime":"2018-11-22 03:32:54.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"operate_sub_flow",
            "times":1
        },
        {
            "jobId":"41",
            "actionId":null,
            "startTime":"2018-11-22 03:32:45.0",
            "endTime":"2018-11-22 03:32:52.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"card",
            "times":1
        },
        {
            "jobId":"42",
            "actionId":null,
            "startTime":"2018-11-22 03:32:47.0",
            "endTime":"2018-11-22 03:32:54.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"customer",
            "times":1
        },
        {
            "jobId":"43",
            "actionId":null,
            "startTime":"2018-11-22 03:32:11.0",
            "endTime":"2018-11-22 03:32:17.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"customer_register_shop",
            "times":1
        },
        {
            "jobId":"44",
            "actionId":null,
            "startTime":"2018-11-22 03:32:34.0",
            "endTime":"2018-11-22 03:32:42.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"customer_register_card",
            "times":1
        },
        {
            "jobId":"115",
            "actionId":null,
            "startTime":"2018-11-22 02:40:03.0",
            "endTime":"2018-11-22 03:00:33.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"totalpayinfo_1",
            "times":1
        },
        {
            "jobId":"116",
            "actionId":null,
            "startTime":"2018-11-22 02:40:04.0",
            "endTime":"2018-11-22 03:00:29.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"totalpayinfo_2",
            "times":1
        },
        {
            "jobId":"252",
            "actionId":null,
            "startTime":"2018-11-22 10:01:00.0",
            "endTime":"2018-11-22 10:01:05.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"menu_balance",
            "times":1
        },
        {
            "jobId":"259",
            "actionId":null,
            "startTime":"2018-11-22 03:32:07.0",
            "endTime":"2018-11-22 03:32:14.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"online_menuwarehouse",
            "times":1
        },
        {
            "jobId":"260",
            "actionId":null,
            "startTime":"2018-11-22 03:31:56.0",
            "endTime":"2018-11-22 03:32:03.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"online_warehouse",
            "times":1
        },
        {
            "jobId":"261",
            "actionId":null,
            "startTime":"2018-11-22 03:34:20.0",
            "endTime":"2018-11-22 03:34:27.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"waitingpay",
            "times":1
        },
        {
            "jobId":"262",
            "actionId":null,
            "startTime":"2018-11-22 03:34:32.0",
            "endTime":"2018-11-22 03:35:00.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"waitingpay_tomysql",
            "times":1
        },
        {
            "jobId":"268",
            "actionId":null,
            "startTime":"2018-11-22 03:34:16.0",
            "endTime":"2018-11-22 03:34:30.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"heimi",
            "times":1
        },
        {
            "jobId":"278",
            "actionId":null,
            "startTime":"2018-11-22 03:34:09.0",
            "endTime":"2018-11-22 03:34:16.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"online_kindpay",
            "times":1
        },
        {
            "jobId":"292",
            "actionId":null,
            "startTime":"2018-11-22 06:00:04.0",
            "endTime":"2018-11-22 06:01:16.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"create_km_kp_mwh_wh",
            "times":1
        },
        {
            "jobId":"316",
            "actionId":null,
            "startTime":"2018-11-22 03:34:18.0",
            "endTime":"2018-11-22 03:34:29.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"test",
            "times":1
        },
        {
            "jobId":"317",
            "actionId":null,
            "startTime":"2018-11-22 03:21:37.0",
            "endTime":"2018-11-22 03:21:43.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"offline_menuwarehouse",
            "times":1
        },
        {
            "jobId":"318",
            "actionId":null,
            "startTime":"2018-11-22 03:34:50.0",
            "endTime":"2018-11-22 03:34:56.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"offline_warehouse",
            "times":1
        },
        {
            "jobId":"319",
            "actionId":null,
            "startTime":"2018-11-22 03:21:57.0",
            "endTime":"2018-11-22 03:22:02.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"offline_kindpay",
            "times":1
        },
        {
            "jobId":"342",
            "actionId":null,
            "startTime":"2018-11-22 03:34:09.0",
            "endTime":"2018-11-22 03:34:15.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"area",
            "times":1
        },
        {
            "jobId":"344",
            "actionId":null,
            "startTime":"2018-11-22 03:21:34.0",
            "endTime":"2018-11-22 03:21:41.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"discountplan",
            "times":1
        },
        {
            "jobId":"345",
            "actionId":null,
            "startTime":"2018-11-22 03:33:04.0",
            "endTime":"2018-11-22 03:33:09.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"seat",
            "times":1
        },
        {
            "jobId":"349",
            "actionId":null,
            "startTime":"2018-11-22 03:32:32.0",
            "endTime":"2018-11-22 03:32:40.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"kind_card",
            "times":1
        },
        {
            "jobId":"369",
            "actionId":null,
            "startTime":"2018-11-22 00:30:03.0",
            "endTime":"2018-11-22 00:30:08.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"attachment",
            "times":1
        },
        {
            "jobId":"374",
            "actionId":null,
            "startTime":"2018-11-22 03:33:13.0",
            "endTime":"2018-11-22 03:33:21.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"reserveset",
            "times":1
        },
        {
            "jobId":"375",
            "actionId":null,
            "startTime":"2018-11-22 03:34:15.0",
            "endTime":"2018-11-22 03:34:23.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"notification",
            "times":1
        },
        {
            "jobId":"382",
            "actionId":null,
            "startTime":"2018-11-22 03:34:37.0",
            "endTime":"2018-11-22 03:34:43.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"shop",
            "times":1
        },
        {
            "jobId":"384",
            "actionId":null,
            "startTime":"2018-11-22 03:34:11.0",
            "endTime":"2018-11-22 03:34:17.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"instancebill",
            "times":1
        },
        {
            "jobId":"405",
            "actionId":null,
            "startTime":"2018-11-22 03:21:33.0",
            "endTime":"2018-11-22 03:21:42.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"userinfo",
            "times":1
        },
        {
            "jobId":"475",
            "actionId":null,
            "startTime":"2018-11-22 03:29:50.0",
            "endTime":"2018-11-22 03:29:54.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"order_tabs",
            "times":1
        },
        {
            "jobId":"510",
            "actionId":null,
            "startTime":"2018-11-22 03:34:31.0",
            "endTime":"2018-11-22 03:34:33.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"tabs",
            "times":1
        },
        {
            "jobId":"511",
            "actionId":null,
            "startTime":"2018-11-22 03:34:19.0",
            "endTime":"2018-11-22 03:34:26.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"kindpaydetail",
            "times":1
        },
        {
            "jobId":"512",
            "actionId":null,
            "startTime":"2018-11-22 03:34:48.0",
            "endTime":"2018-11-22 03:34:53.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"kindpay",
            "times":1
        },
        {
            "jobId":"513",
            "actionId":null,
            "startTime":"2018-11-22 03:32:08.0",
            "endTime":"2018-11-22 03:32:16.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"kindpaydetailoption",
            "times":1
        },
        {
            "jobId":"617",
            "actionId":null,
            "startTime":"2018-11-22 10:01:01.0",
            "endTime":"2018-11-22 10:02:26.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promotion",
            "times":2
        },
        {
            "jobId":"618",
            "actionId":null,
            "startTime":"2018-11-22 00:25:03.0",
            "endTime":"2018-11-22 00:27:15.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promotion_template",
            "times":1
        },
        {
            "jobId":"619",
            "actionId":null,
            "startTime":"2018-11-22 00:22:05.0",
            "endTime":"2018-11-22 00:24:19.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promotion_customer",
            "times":1
        },
        {
            "jobId":"629",
            "actionId":null,
            "startTime":"2018-11-22 02:00:07.0",
            "endTime":"2018-11-22 02:01:45.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"supplychain",
            "description":null,
            "jobName":"user_info",
            "times":1
        },
        {
            "jobId":"637",
            "actionId":null,
            "startTime":"2018-11-22 03:33:02.0",
            "endTime":"2018-11-22 03:33:02.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"specialfee",
            "times":1
        },
        {
            "jobId":"686",
            "actionId":null,
            "startTime":"2018-11-22 02:00:05.0",
            "endTime":"2018-11-22 02:00:13.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"seat_2",
            "times":1
        },
        {
            "jobId":"687",
            "actionId":null,
            "startTime":"2018-11-22 02:00:03.0",
            "endTime":"2018-11-22 02:00:09.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"seat_3",
            "times":1
        },
        {
            "jobId":"688",
            "actionId":null,
            "startTime":"2018-11-22 02:00:09.0",
            "endTime":"2018-11-22 02:00:17.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"seat_4",
            "times":1
        },
        {
            "jobId":"730",
            "actionId":null,
            "startTime":"2018-11-22 03:29:56.0",
            "endTime":"2018-11-22 03:31:56.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_tabs",
            "times":1
        },
        {
            "jobId":"731",
            "actionId":null,
            "startTime":"2018-11-22 01:09:37.0",
            "endTime":"2018-11-22 01:09:48.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"standard_goods",
            "times":1
        },
        {
            "jobId":"732",
            "actionId":null,
            "startTime":"2018-11-22 01:05:30.0",
            "endTime":"2018-11-22 01:05:37.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"standard_category",
            "times":1
        },
        {
            "jobId":"813",
            "actionId":null,
            "startTime":"2018-11-22 03:32:58.0",
            "endTime":"2018-11-22 03:33:06.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"menu",
            "times":1
        },
        {
            "jobId":"816",
            "actionId":null,
            "startTime":"2018-11-22 03:33:08.0",
            "endTime":"2018-11-22 03:33:22.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_card",
            "times":1
        },
        {
            "jobId":"817",
            "actionId":null,
            "startTime":"2018-11-22 03:33:10.0",
            "endTime":"2018-11-22 03:34:02.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_customer",
            "times":1
        },
        {
            "jobId":"818",
            "actionId":null,
            "startTime":"2018-11-22 03:33:11.0",
            "endTime":"2018-11-22 03:34:12.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_customer_register",
            "times":1
        },
        {
            "jobId":"819",
            "actionId":null,
            "startTime":"2018-11-22 03:33:12.0",
            "endTime":"2018-11-22 03:34:10.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_customer_register_shop",
            "times":1
        },
        {
            "jobId":"820",
            "actionId":null,
            "startTime":"2018-11-22 03:33:09.0",
            "endTime":"2018-11-22 03:34:01.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_money_flow",
            "times":1
        },
        {
            "jobId":"821",
            "actionId":null,
            "startTime":"2018-11-22 03:22:08.0",
            "endTime":"2018-11-22 03:23:11.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"orderdetail",
            "times":1
        },
        {
            "jobId":"823",
            "actionId":null,
            "startTime":"2018-11-22 03:22:09.0",
            "endTime":"2018-11-22 03:22:39.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"totalpayinfo",
            "times":1
        },
        {
            "jobId":"824",
            "actionId":null,
            "startTime":"2018-11-22 03:22:10.0",
            "endTime":"2018-11-22 03:23:09.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"waiting_pay",
            "times":1
        },
        {
            "jobId":"829",
            "actionId":null,
            "startTime":"2018-11-22 03:29:48.0",
            "endTime":"2018-11-22 03:29:48.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"start-order",
            "times":1
        },
        {
            "jobId":"830",
            "actionId":null,
            "startTime":"2018-11-22 03:29:34.0",
            "endTime":"2018-11-22 03:29:34.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"start-member",
            "times":1
        },
        {
            "jobId":"1059",
            "actionId":null,
            "startTime":"2018-11-22 03:32:21.0",
            "endTime":"2018-11-22 03:32:26.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"spark_flow",
            "times":1
        },
        {
            "jobId":"1060",
            "actionId":null,
            "startTime":"2018-11-22 03:32:20.0",
            "endTime":"2018-11-22 03:32:29.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"other_rt_crid",
            "times":1
        },
        {
            "jobId":"1088",
            "actionId":null,
            "startTime":"2018-11-22 03:32:14.0",
            "endTime":"2018-11-22 03:32:19.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"customer_register_degree",
            "times":1
        },
        {
            "jobId":"1090",
            "actionId":null,
            "startTime":"2018-11-22 03:32:23.0",
            "endTime":"2018-11-22 03:32:29.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"apply_shop",
            "times":4
        },
        {
            "jobId":"1124",
            "actionId":null,
            "startTime":"2018-11-22 01:11:33.0",
            "endTime":"2018-11-22 01:15:29.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"employee",
            "times":1
        },
        {
            "jobId":"1133",
            "actionId":null,
            "startTime":"2018-11-22 03:07:55.0",
            "endTime":"2018-11-22 03:11:31.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"desktop",
            "times":1
        },
        {
            "jobId":"1142",
            "actionId":null,
            "startTime":"2018-11-22 03:17:47.0",
            "endTime":"2018-11-22 03:19:42.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"yuntun",
            "description":null,
            "jobName":"fix2",
            "times":1
        },
        {
            "jobId":"1241",
            "actionId":null,
            "startTime":"2018-11-22 03:24:43.0",
            "endTime":"2018-11-22 03:24:50.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"fin_member_pay_mode",
            "times":1
        },
        {
            "jobId":"1272",
            "actionId":null,
            "startTime":"2018-11-22 03:02:57.0",
            "endTime":"2018-11-22 03:10:37.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"DIM_T_PUB_SHOP_INFO",
            "times":1
        },
        {
            "jobId":"1276",
            "actionId":null,
            "startTime":"2018-11-22 03:29:29.0",
            "endTime":"2018-11-22 03:29:34.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"area_1",
            "times":1
        },
        {
            "jobId":"1285",
            "actionId":null,
            "startTime":"2018-11-22 03:24:44.0",
            "endTime":"2018-11-22 03:24:50.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"area_2",
            "times":1
        },
        {
            "jobId":"1286",
            "actionId":null,
            "startTime":"2018-11-22 03:00:16.0",
            "endTime":"2018-11-22 03:00:29.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"area_3",
            "times":1
        },
        {
            "jobId":"1287",
            "actionId":null,
            "startTime":"2018-11-22 03:22:11.0",
            "endTime":"2018-11-22 03:22:25.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"area_4",
            "times":1
        },
        {
            "jobId":"1368",
            "actionId":null,
            "startTime":"2018-11-22 03:34:39.0",
            "endTime":"2018-11-22 03:38:51.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"deskmate",
            "times":1
        },
        {
            "jobId":"1389",
            "actionId":null,
            "startTime":"2018-11-22 03:21:12.0",
            "endTime":"2018-11-22 03:25:07.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"seat",
            "times":1
        },
        {
            "jobId":"1425",
            "actionId":null,
            "startTime":"2018-11-22 03:06:01.0",
            "endTime":"2018-11-22 03:06:46.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_kind_menu",
            "times":1
        },
        {
            "jobId":"1428",
            "actionId":null,
            "startTime":"2018-11-22 03:34:36.0",
            "endTime":"2018-11-22 03:34:48.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_menu",
            "times":1
        },
        {
            "jobId":"1430",
            "actionId":null,
            "startTime":"2018-11-22 03:21:08.0",
            "endTime":"2018-11-22 03:21:10.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"ent_enterprise_dict",
            "times":1
        },
        {
            "jobId":"1431",
            "actionId":null,
            "startTime":"2018-11-22 03:11:50.0",
            "endTime":"2018-11-22 03:11:59.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"start-item",
            "times":1
        },
        {
            "jobId":"1433",
            "actionId":null,
            "startTime":"2018-11-22 03:10:11.0",
            "endTime":"2018-11-22 03:10:55.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"import_spec_detail",
            "times":1
        },
        {
            "jobId":"1435",
            "actionId":null,
            "startTime":"2018-11-22 03:05:18.0",
            "endTime":"2018-11-22 03:05:55.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"menu_warehouse_ratio",
            "times":1
        },
        {
            "jobId":"1437",
            "actionId":null,
            "startTime":"2018-11-22 03:11:12.0",
            "endTime":"2018-11-22 03:11:53.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"time_arrange",
            "times":1
        },
        {
            "jobId":"1440",
            "actionId":null,
            "startTime":"2018-11-22 03:21:11.0",
            "endTime":"2018-11-22 03:21:11.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"start-scmdb",
            "times":1
        },
        {
            "jobId":"1445",
            "actionId":null,
            "startTime":"2018-11-22 03:12:15.0",
            "endTime":"2018-11-22 03:13:29.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"menu_warehouse",
            "times":1
        },
        {
            "jobId":"1523",
            "actionId":null,
            "startTime":"2018-11-22 03:10:54.0",
            "endTime":"2018-11-22 03:15:31.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promotion_detail",
            "times":1
        },
        {
            "jobId":"1561",
            "actionId":null,
            "startTime":"2018-11-22 03:07:53.0",
            "endTime":"2018-11-22 03:07:56.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"spark2-start",
            "times":1
        },
        {
            "jobId":"1643",
            "actionId":null,
            "startTime":"2018-11-22 03:06:12.0",
            "endTime":"2018-11-22 03:10:10.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"bo_task",
            "times":1
        },
        {
            "jobId":"1674",
            "actionId":null,
            "startTime":"2018-11-22 03:06:56.0",
            "endTime":"2018-11-22 03:10:51.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"charge_item_open",
            "times":1
        },
        {
            "jobId":"1681",
            "actionId":null,
            "startTime":"2018-11-22 03:05:52.0",
            "endTime":"2018-11-22 03:09:20.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promo_coupon",
            "times":1
        },
        {
            "jobId":"1687",
            "actionId":null,
            "startTime":"2018-11-22 01:09:39.0",
            "endTime":"2018-11-22 01:09:49.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"cashline",
            "description":null,
            "jobName":"mall",
            "times":1
        },
        {
            "jobId":"1688",
            "actionId":null,
            "startTime":"2018-11-22 01:10:40.0",
            "endTime":"2018-11-22 01:10:53.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"cashline",
            "description":null,
            "jobName":"mall_shop",
            "times":1
        },
        {
            "jobId":"1701",
            "actionId":null,
            "startTime":"2018-11-22 03:00:37.0",
            "endTime":"2018-11-22 03:00:42.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"presell_order_extra_1",
            "times":1
        },
        {
            "jobId":"1829",
            "actionId":null,
            "startTime":"2018-11-22 01:11:34.0",
            "endTime":"2018-11-22 01:16:08.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"payment_flow",
            "times":1
        },
        {
            "jobId":"1830",
            "actionId":null,
            "startTime":"2018-11-22 01:30:05.0",
            "endTime":"2018-11-22 01:33:55.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"pay_bill",
            "times":1
        },
        {
            "jobId":"1831",
            "actionId":null,
            "startTime":"2018-11-22 01:15:02.0",
            "endTime":"2018-11-22 01:19:19.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"pre_pay_bill",
            "times":1
        },
        {
            "jobId":"1863",
            "actionId":null,
            "startTime":"2018-11-22 04:00:10.0",
            "endTime":"2018-11-22 04:00:10.0",
            "executeHost":null,
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"C",
            "times":2
        },
        {
            "jobId":"1952",
            "actionId":null,
            "startTime":"2018-11-22 00:00:01.0",
            "endTime":"2018-11-22 00:00:10.0",
            "executeHost":"10.1.21.67",
            "status":"failed",
            "operator":"biadmin",
            "description":null,
            "jobName":"11",
            "times":14
        },
        {
            "jobId":"1965",
            "actionId":null,
            "startTime":"2018-11-22 03:00:06.0",
            "endTime":"2018-11-22 03:03:12.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"import123",
            "description":null,
            "jobName":"promotion_consume_code",
            "times":1
        },
        {
            "jobId":"1977",
            "actionId":null,
            "startTime":"2018-11-22 03:00:12.0",
            "endTime":"2018-11-22 03:02:20.0",
            "executeHost":"10.1.21.58",
            "status":"failed",
            "operator":"olap",
            "description":null,
            "jobName":"导入订单回流数据",
            "times":1
        }
    ]
};
$(function () {

    $('#jobDetailMenu').addClass('active');
    $('#jobDetailMenu').parent().addClass('menu-open');
    $('#jobDetailMenu').parent().parent().addClass('menu-open');
    $('#jobManage').addClass('active');
    var oTable = new TableInit();
    oTable.init();
    $('#historyJobTable').bootstrapTable('hideLoading');

});

function updateTable() {
    $('#historyJobTable').bootstrapTable('refresh');
}

var TableInit = function () {
    var oTableInit = new Object();
    oTableInit.init = function () {
        var table = $('#historyJobTable');
        table.bootstrapTable({
            // url: base_url + '/jobManage/findJobHistoryByStaus',
            // method: 'get',
            pagination: true,
            cache: false,
            clickToSelect: true,
            toolTip: "",
            striped: false,
            showRefresh: true,           //是否显示刷新按钮
            showPaginationSwitch: true,  //是否显示选择分页数按钮
            pageNumber: 1,              //初始化加载第一页，默认第一页
            pageSize: 20,                //每页的记录行数（*）
            sidePagination: "client",
            pageList: [40, 60, 80],
            // queryParams: params,
            search: true,
            uniqueId: 'id',
            onClickRow:function (row) {
                // console.log(row)
                $('#runningLogDetailTable').bootstrapTable("destroy");
                var tableObject = new JobLogTable(row.jobId);
                tableObject.init();
                $('#jobLog').modal('show');
            },
            columns: [
                {
                    field: '',
                    title: '序号',
                    formatter: function (val, row, index) {
                        return index + 1;
                    }
                }, {
                    field: 'jobId',
                    title: '任务ID'
                }, {
                    field: 'jobName',
                    title: '任务名称'
                }, {
                    field: 'description',
                    title: '任务描述'
                }, {
                    field: 'startTime',
                    title: '开始时间',
                    formatter: function (val) {
                        return getLocalTime(val);
                    }
                }, {
                    field: 'times',
                    title: '执行次数'
                }, {
                    field: 'executeHost',
                    title: '执行服务器'
                }, {
                    field: 'status',
                    title: '执行状态'
                }, {
                    field: 'operator',
                    title: '执行人'
                }
            ],
            data:info.data
        });
    }
    return oTableInit;
}

function params(params) {
    var temp = {
        status: $('#jobStatus').val(),
    };
    return temp;
}
var JobLogTable = function (jobId) {
    var parameter = {jobId: jobId};
    var actionRow;
    var oTableInit = new Object();
    var onExpand = -1;
    var table = $('#runningLogDetailTable');
    var timerHandler = null;


    function scheduleLog() {

        $.ajax({
            url: base_url + "/scheduleCenter/getLog.do",
            type: "get",
            data: {
                id: actionRow.id,
            },
            success: function (data) {
                if (data.status != 'running') {
                    window.clearInterval(timerHandler);
                }
                var logArea = $('#log_' + actionRow.id);
                logArea[0].innerHTML = data.log;
                logArea.scrollTop(logArea.prop("scrollHeight"), 200);
                actionRow.log = data.log;
                actionRow.status = data.status;
            }
        })
    }

    $('#jobLog').on('hide.bs.modal', function () {
        if (timerHandler != null) {
            window.clearInterval(timerHandler)
        }
    });

    $('#jobLog [name="refreshLog"]').on('click', function () {
        table.bootstrapTable('refresh');
        table.bootstrapTable('expandRow', onExpand);
    });

    oTableInit.init = function () {
        table.bootstrapTable({
            url: base_url + "/scheduleCenter/getJobHistory.do",
            queryParams: parameter,
            pagination: true,
            showPaginationSwitch: false,
            search: false,
            cache: false,
            pageNumber: 1,
            showRefresh: true,           //是否显示刷新按钮
            showPaginationSwitch: true,  //是否显示选择分页数按钮
            sidePagination: "server",
            queryParamsType: "limit",
            queryParams: function (params) {
                var tmp = {
                    pageSize: params.limit,
                    offset: params.offset,
                    jobId: jobId
                };
                return tmp;
            },
            pageList: [10, 25, 40, 60],
            columns: [
                {
                    field: "id",
                    title: "id"
                }, {
                    field: "actionId",
                    title: "版本号"
                }, {
                    field: "jobId",
                    title: "任务ID"
                }, {
                    field: "executeHost",
                    title: "执行机器ip"
                }, {
                    field: "status",
                    title: "执行状态"
                }, {
                    field: "operator",
                    title: "执行人"
                }, {
                    field: "startTime",
                    title: "开始时间",
                    width: "20%",
                    formatter: function (row) {
                        return getLocalTime(row);
                    }
                }, {
                    field: "endTime",
                    title: "结束时间",
                    width: "20%",
                    formatter: function (row) {
                        return getLocalTime(row);
                    }
                }, {
                    field: "illustrate",
                    title: "说明",
                    formatter: function (val) {
                        if (val == null) {
                            return val;
                        }
                        return "<span class='label label-info' data-toggle='tooltip' title='" + val + "' >" + val.slice(0, 6) + "</span>";
                    }
                },
                {
                    field: "triggerType",
                    title: "触发类型",
                    width: "20%",
                    formatter: function (value, row) {
                        if (row['triggerType'] == 1) {
                            return "自动调度";
                        }
                        if (row['triggerType'] == 2) {
                            return "手动触发";
                        }
                        if (row['triggerType'] == 3) {
                            return "手动恢复";
                        }
                        return value;
                    }
                },
                {
                    field: "status",
                    title: "操作",
                    width: "20%",
                    formatter: function (index, row) {
                        var html = '<a href="javascript:cancelJob(\'' + row['id'] + '\',\'' + row['jobId'] + '\')">取消任务</a>';
                        if (row['status'] == 'running') {
                            return html;
                        }
                    }
                }
            ],
            detailView: true,
            detailFormatter: function (index, row) {
                var html = '<form role="form">' + '<div class="form-group">' + '<div class="form-control"  style="overflow:scroll; word-break: break-all; word-wrap:break-word; height:600px; white-space:pre-line;font-family:Microsoft YaHei" id="log_' + row.id + '">'
                    + '日志加载中。。' +
                    '</div>' + '<form role="form">' + '<div class="form-group">';
                return html;
            },
            onExpandRow: function (index, row) {
                actionRow = row;
                if (index != onExpand) {
                    table.bootstrapTable("collapseRow", onExpand);
                }
                onExpand = index;
                if (row.status == "running") {
                    scheduleLog();
                    timerHandler = window.setInterval(scheduleLog, 3000);
                } else {
                    scheduleLog();
                }
            },
            onCollapseRow: function (index, row) {
                window.clearInterval(timerHandler)
            }
        });
    };
    return oTableInit;
};
function cancelJob(historyId, jobId) {
    var url = base_url + "/scheduleCenter/cancelJob.do";
    var parameter = {historyId: historyId, jobId: jobId};
    $.get(url, parameter, function (data) {
        layer.msg(data);
        $('#jobLog [name="refreshLog"]').trigger('click');
    });
}
